# 1. Node JS 연동

## 대략적인 흐름

1. 커넥션 풀을 만들고
2. DB와 연결
3. 쿼리문을 수행
4. 커넥션 릴리즈

## DB와의 연결고리

client가 처음 요청 받으면 pool에서 빌려옴

## 쫌쫌따리 폴더구조 좀 이해해보겠음

- db/db.js에 connection pool 재정의
- db/ 여기에 쿼리문을 정의해서 export함
- api/routes/user/ 여기 안에 GET POST DELETE PUT별로 파일 만들어둠 , 이때 당연히 db/db.js와 각각의 html 메소드를 수행하는데 필요한 db폴더 내부의 db파일들을 가져옴

# 2. ERD

- https://www.erdcloud.com/ 여기서 그려볼 수 있음
- ERD를 먼저 설계하고 dB를 만들고 싶은 경우에 ERD툴을 이용해서 설계하고 DB를 만듦
- 여기에 익숙해지는 것도 시간이 좀 걸림
- 그리고 역으로 datagrip에서 ERD로 빼낼 수도 있음 (테이블들 선택)

# 3. REST API

- URI는 URL을 포함한 개념
- 네이밍이 직관적이어야하고, 명사가 이해하기 좋음
- URI 설계에 정답은 없지만, 항상 일관된 규칙으로 작성해야 혼동되지 않음
- 자원이 URI, 행위는 http 메소드

### 특징

- 슬래시는 계층 구분에 쓰임
- 하이폰은 가독성을 높이기 위해 사용
- 밑줄은 사용 안 함
- 소문자
- 파일 확장자는 포함시키지 않음

# 4. 인증

## http의 특징

- http -> 무상태 프로토콜, 로그인 요청을 보내도 그 다음 요청은 로그인 요청과 독립적

## 그래서

- 인증 : 로그인
- 인가 : ㅇㅋ 너 사용자인 거 알겠어. 근데 이 컨텐츠에 접근할 권한이 있는지를 확인할게

## 종류

- 쿠키 : 요청과 응답의 header에 클라가 갖고 있는 쿠키 정보가 담김(키-값 쌍) -> 클라이언트 로컬에 일정 시간 동안 저장. 서버에서 요청 시 쿠키가 있으면 자동으로 같이 보내줌. 그렇지만 앱에선 사용 매우 제한적
- session : 웹 브라우저를 통해 웹 버에 접속한 이후로 브라우저를 종료할 때까지 유지, 클라이언트는 발급받은 세션 ID를 서버 메모리에 저장. 다양한 계정 있는 경우에 좋음 -> 그렇지만 서버 자원을 사용하기 때문에 너무 많아지면 메모리 낭비, 느려짐
- 토큰 : JWT
